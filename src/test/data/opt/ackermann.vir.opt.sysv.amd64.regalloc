module foo

export function $foo { ; returns: rax
@22:
  push rbp ; @60
  mov rbp, rsp ; @61
  sub rsp, 0x8_l ; @62
  push rbx ; @63
  mov eax, esi ; @58
@2:
  test edi, edi ; @50
  je @3 ; @51
@4:
  lea ebx, qword ptr [rdi - 0x1] ; @29
  test eax, eax ; @45
  jne @8 ; @46
@33:
  mov edi, ebx ; @42
  mov eax, 0x1_w ; @43
  jmp @2 ; @44
@8:
  lea esi, qword ptr [rax - 0x1] ; @31
  call $foo ; rdi rsi ; @40
  mov edi, ebx ; @36
  jmp @2 ; @38
@3:
  inc eax ; @32
  pop rbx ; @64
  leave ; @65
  ret ; @35
}
