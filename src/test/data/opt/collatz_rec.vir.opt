module collatz_rec

export function w $foo(w %n, w %steps) {
@18:
  jmp @2(%n, %steps)
@2(%1, %2):
  %11 = eq.w %1, 0x1_w ; @27
  br %11, @17, @4
@4:
  %12 = add.w %2, 0x1_w ; @28
  %13 = and.w %1, 0x1_w ; @29
  %14 = eq.w %13, 0x0_w ; @30
  br %14, @6, @7
@6:
  %18 = lsr.w %1, 0x1_w ; @34
  jmp @2(%18, %12)
@7:
  %15 = lsl.w %1, 0x1_w ; @31
  %16 = add.w %15, %1 ; @32
  %17 = add.w %16, 0x1_w ; @33
  jmp @2(%17, %12)
@17:
  ret %2
}
