module prime_main_licm

const data $fmt = {
  "prime(%d) = %d\n",
  0x0_b
}

export function w $main(w %argc, l %argv) {
@2:
  %6 = add.l %argv, 0x8_l ; @27
  %p.2 = ld.l %6 ; @5
  %n.1 = call.w $atoi(%p.2) ; @6
  jmp @3(%n.1, 0x1_w, 0x1_w)
@3(%n.2, %m.2, %i.2):
  %7 = sle.w %n.2, 0x0_w ; @28
  br %7, @9, @10(%i.2)
@10(%i.3):
  %b.1 = call.w $is_prime(%i.3) ; @14
  %8 = add.w %i.3, 0x1_w ; @29
  %9 = eq.w %b.1, 0x0_w ; @30
  br %9, @10(%8), @13
@13:
  %k.1 = call.w $printf($fmt, ..., %m.2, %i.3) ; @16
  %10 = sub.w %n.2, 0x1_w ; @31
  %11 = add.w %m.2, 0x1_w ; @32
  jmp @3(%10, %11, %8)
@9:
  ret 0x0_w
}
