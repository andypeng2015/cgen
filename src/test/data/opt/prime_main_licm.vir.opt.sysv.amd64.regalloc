module prime_main_licm

const data $fmt = {
  "prime(%d) = %d\n",
  0x0_b
}

export function $main { ; returns: rax
@2:
  push rbp ; @70
  mov rbp, rsp ; @71
  push r12 ; @72
  push r13 ; @73
  push r14 ; @74
  push rbx ; @75
  mov rdi, qword ptr [rsi + 0x8] ; @5
  call $atoi ; rdi ; @66
  mov r14d, eax ; @62
  mov r13d, 0x1_w ; @63
  mov eax, 0x1_w ; @64
@3:
  cmp r14d, 0x0_w ; @57
  jle @9 ; @58
@33:
  mov ebx, eax ; @55
@10:
  mov edi, ebx ; @14
  call $is_prime ; rdi ; @53
  lea r12d, qword ptr [rbx + 0x1] ; @29
  test eax, eax ; @48
  jne @13 ; @49
@34:
  mov ebx, r12d ; @46
  jmp @10 ; @47
@13:
  lea rdi, qword ptr [rip + $fmt] ; @16
  mov esi, r13d ; @41
  mov edx, ebx ; @42
  xor al, al ; @43
  call $printf ; rax rdi rdx rsi ; @44
  lea ecx, qword ptr [r14 - 0x1] ; @31
  lea eax, qword ptr [r13 + 0x1] ; @32
  mov r14d, ecx ; @37
  mov r13d, eax ; @38
  mov eax, r12d ; @39
  jmp @3 ; @40
@9:
  xor eax, eax ; @35
  pop rbx ; @76
  pop r14 ; @77
  pop r13 ; @78
  pop r12 ; @79
  leave ; @80
  ret ; @36
}
