module popcnt

export function $popcnt8 { ; returns: rax
@2:
  mov %n:b, dil ; @14
  movzx %8:w, %n:b ; @20
  popcnt %9:w, %8:w ; @21
  mov %4:w, %9:w ; @22
  mov al, %4:b ; @18
  ret ; @19
}

export function $popcnt16 { ; returns: rax
@4:
  mov %n:h, di ; @15
  movzx %10:w, %n:h ; @25
  popcnt %11:w, %10:w ; @26
  mov %5:w, %11:w ; @27
  mov ax, %5:h ; @23
  ret ; @24
}

export function $popcnt32 { ; returns: rax
@6:
  mov %n:w, edi ; @16
  mov %12:w, %n:w ; @30
  popcnt %13:w, %12:w ; @31
  mov %6:w, %13:w ; @32
  mov eax, %6:w ; @28
  ret ; @29
}

export function $popcnt64 { ; returns: rax
@8:
  mov %n:l, rdi ; @17
  mov %14:l, %n:l ; @35
  popcnt %15:l, %14:l ; @36
  mov %7:l, %15:l ; @37
  mov rax, %7:l ; @33
  ret ; @34
}
